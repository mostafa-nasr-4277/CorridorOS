<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corridor OS v4 - Hybrid Quantum-Photonic Operating System</title>
    <meta name="corridoros-version" content="v4">
    <meta name="theme-color" content="#ff0080">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="corridor-os-styles.84d8f5a3.css">
    <link rel="stylesheet" href="brand/corridoros-brand.b501abdc.css">
    <!-- Removed remote Google Fonts to avoid offline render blocking; rely on system fallbacks -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%2300d4ff'/></svg>">
</head>
<body>
    <!-- Boot Splash Screen -->
    <div id="boot-splash" class="boot-splash">
        <div class="boot-logo">
            <div class="quantum-spinner"></div>
            <h1>Corridor OS</h1>
            <p>Hybrid Quantum-Photonic Operating System</p>
            <div class="co-boot-icons">
                <img src="brand/icons/logo-cube.svg" alt="Corridor Cube"/>
                <img src="brand/icons/icon-quantum.svg" alt="Quantum"/>
                <img src="brand/icons/icon-memory.svg" alt="Free-Form Memory"/>
                <img src="brand/icons/icon-analytics.svg" alt="Synchrony Analytics"/>
            </div>
        </div>
        <div class="boot-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="boot-progress-fill"></div>
            </div>
            <div class="boot-status" id="boot-status">Initializing quantum substrate...</div>
            <label for="fast-boot-toggle" style="display:inline-flex;align-items:center;gap:8px;margin-top:10px;color:rgba(255,255,255,.85);font-size:13px;">
                <input type="checkbox" id="fast-boot-toggle" style="accent-color:#00d4ff;"> ‚ö° Fast Boot
            </label>
        </div>
    </div>

    <!-- Main OS Desktop -->
    <div id="desktop" class="desktop" style="display: none;">
        <!-- Desktop Background -->
        <div class="desktop-background"></div>
        
        <!-- Top Panel (Ubuntu-inspired) -->
        <div class="top-panel">
            <div class="panel-left">
                <button class="activities-button" onclick="showActivitiesOverview()">
                    <span class="corridor-logo"></span>
                    Activities
                </button>
                <div class="app-menu">
                    <button class="menu-item" onclick="openApp('terminal')">Terminal</button>
                    <button class="menu-item" onclick="openApp('files')">Files</button>
                    <button class="menu-item" onclick="openApp('quantum-lab')">Quantum Lab</button>
                    <button class="menu-item" onclick="openApp('photonic-studio')">Photonic Studio</button>
                </div>
            </div>
            <div class="panel-center">
                <div class="clock" id="desktop-clock"></div>
            </div>
            <div class="panel-right">
                <button class="panel-button" id="notificationsToggle" title="Notifications" onclick="toggleNotificationsPanel()">
                    <span class="icon">üîî</span>
                    <span class="badge" id="notificationsBadge" style="display:none;">0</span>
                </button>
                <button class="panel-button" onclick="openApp('network-manager')">
                    <span class="icon">üì∂</span>
                </button>
                <button class="panel-button" onclick="openApp('power-manager')">
                    <span class="icon">üîã</span>
                </button>
                <button class="panel-button" onclick="openApp('settings')">
                    <span class="icon">‚öôÔ∏è</span>
                </button>
                <button class="panel-button user-menu" onclick="showUserMenu()">
                    <span class="icon">üë§</span>
                </button>
            </div>
        </div>

        <!-- Dock (macOS-inspired but Ubuntu-themed) -->
        <div class="dock">
            <div class="dock-apps">
                <button class="dock-app" onclick="openApp('terminal')" title="Terminal">
                    <span class="app-icon">üíª</span>
                </button>
                <button class="dock-app" onclick="openApp('files')" title="Files">
                    <span class="app-icon">üìÅ</span>
                </button>
                <button class="dock-app" onclick="openApp('quantum-lab')" title="Quantum Lab">
                    <span class="app-icon">‚öõÔ∏è</span>
                </button>
                <button class="dock-app" onclick="openApp('photonic-studio')" title="Photonic Studio">
                    <span class="app-icon">üåü</span>
                </button>
                <button class="dock-app" onclick="openApp('corridor-computer')" title="Corridor Computer">
                    <span class="app-icon">üî¨</span>
                </button>
                <button class="dock-app" onclick="openApp('settings')" title="Settings">
                    <span class="app-icon">‚öôÔ∏è</span>
                </button>
                <div class="dock-separator"></div>
                <button class="dock-app trash" onclick="openApp('trash')" title="Trash">
                    <span class="app-icon">üóëÔ∏è</span>
                </button>
            </div>
        </div>

        <!-- Activities Overview -->
        <div id="activities-overview" class="activities-overview" style="display: none;">
            <div class="overview-search">
                <input type="text" placeholder="Type to search applications..." id="app-search">
            </div>
            <div class="overview-workspaces">
                <div class="workspace active" onclick="switchWorkspace(1)">
                    <span>Workspace 1</span>
                    <div class="workspace-windows"></div>
                </div>
                <div class="workspace" onclick="switchWorkspace(2)">
                    <span>Workspace 2</span>
                    <div class="workspace-windows"></div>
                </div>
                <div class="workspace" onclick="switchWorkspace(3)">
                    <span>Workspace 3</span>
                    <div class="workspace-windows"></div>
                </div>
            </div>
            <div class="overview-apps">
                <div class="app-grid">
                    <div class="app-item" onclick="openApp('terminal')">
                        <span class="app-icon">üíª</span>
                        <span class="app-name">Terminal</span>
                    </div>
                    <div class="app-item" onclick="openApp('files')">
                        <span class="app-icon">üìÅ</span>
                        <span class="app-name">Files</span>
                    </div>
                    <div class="app-item" onclick="openApp('quantum-lab')">
                        <span class="app-icon">‚öõÔ∏è</span>
                        <span class="app-name">Quantum Lab</span>
                    </div>
                    <div class="app-item" onclick="openApp('photonic-studio')">
                        <span class="app-icon">üåü</span>
                        <span class="app-name">Photonic Studio</span>
                    </div>
                    <div class="app-item" onclick="openApp('corridor-computer')">
                        <span class="app-icon">üî¨</span>
                        <span class="app-name">Corridor Computer</span>
                    </div>
                    <div class="app-item" onclick="openApp('settings')">
                        <span class="app-icon">‚öôÔ∏è</span>
                        <span class="app-name">Settings</span>
                    </div>
                    <div class="app-item" onclick="openApp('web-browser')">
                        <span class="app-icon">üåê</span>
                        <span class="app-name">Web Browser</span>
                    </div>
                    <div class="app-item" onclick="openApp('text-editor')">
                        <span class="app-icon">üìù</span>
                        <span class="app-name">Text Editor</span>
                    </div>
                    <div class="app-item" onclick="openApp('calculator')">
                        <span class="app-icon">üßÆ</span>
                        <span class="app-name">Calculator</span>
                    </div>
                    <div class="app-item" onclick="openApp('image-viewer')">
                        <span class="app-icon">üñºÔ∏è</span>
                        <span class="app-name">Image Viewer</span>
                    </div>
                    <div class="app-item" onclick="openApp('music-player')">
                        <span class="app-icon">üéµ</span>
                        <span class="app-name">Music Player</span>
                    </div>
                    <div class="app-item" onclick="openApp('video-player')">
                        <span class="app-icon">üé¨</span>
                        <span class="app-name">Video Player</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Application Windows Container -->
        <div id="windows-container" class="windows-container"></div>

        <!-- User Menu -->
        <div id="user-menu" class="user-menu" style="display: none;">
            <div class="menu-item" onclick="openApp('settings')">
                <span class="icon">‚öôÔ∏è</span>
                Settings
            </div>
            <div class="menu-item" onclick="lockScreen()">
                <span class="icon">üîí</span>
                Lock Screen
            </div>
            <div class="menu-item" onclick="logout()">
                <span class="icon">üö™</span>
                Log Out
            </div>
            <div class="menu-separator"></div>
            <div class="menu-item" onclick="restart()">
                <span class="icon">üîÑ</span>
                Restart
            </div>
            <div class="menu-item" onclick="shutdown()">
                <span class="icon">‚èª</span>
                Shut Down
            </div>
        </div>

        <!-- Context Menu -->
        <div id="context-menu" class="context-menu" style="display: none;">
            <div class="menu-item" onclick="createFile()">New File</div>
            <div class="menu-item" onclick="createFolder()">New Folder</div>
            <div class="menu-separator"></div>
            <div class="menu-item" onclick="openTerminalHere()">Open Terminal Here</div>
            <div class="menu-separator"></div>
            <div class="menu-item" onclick="openSettings()">Settings</div>
        </div>

        <!-- Desktop Icons -->
        <div class="desktop-icons">
            <div class="desktop-icon" ondblclick="openApp('files')">
                <span class="icon">üìÅ</span>
                <span class="label">Home</span>
            </div>
            <div class="desktop-icon" ondblclick="openApp('trash')">
                <span class="icon">üóëÔ∏è</span>
                <span class="label">Trash</span>
            </div>
        </div>

        <!-- Toast Notifications (ephemeral) -->
        <div id="notifications" class="notifications"></div>

        <!-- Notifications Panel (persistent) -->
        <aside id="notifications-panel" class="notifications-panel" aria-hidden="true">
            <div class="notifications-header">
                <div class="title">Notifications</div>
                <div class="actions">
                    <button class="clear-all" onclick="clearAllNotifications()" title="Clear all">Clear All</button>
                    <button class="close-panel" onclick="toggleNotificationsPanel()" title="Close">√ó</button>
                </div>
            </div>
            <div id="notifications-list" class="notifications-list" role="list"></div>
            <div id="notifications-empty" class="notifications-empty" style="display:none;">No notifications</div>
        </aside>
    </div>

    <!-- Lock Screen -->
    <div id="lock-screen" class="lock-screen" style="display: none;">
        <div class="lock-content">
            <div class="lock-clock" id="lock-clock"></div>
            <div class="lock-date" id="lock-date"></div>
            <div class="lock-user">
                <div class="user-avatar">üë§</div>
                <div class="user-name">Corridor User</div>
                <input type="password" placeholder="Enter password" class="password-input" id="password-input">
                <button class="unlock-button" onclick="unlock()">Unlock</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="corridor-os.e62b5411.js"></script>
    <script src="corridor-apps.80c3fc57.js"></script>
    <script src="corridor-settings.c33d2c77.js"></script>
    <script src="corridor-window-manager.ce86a1db.js"></script>
    
    <!-- Include existing Corridor Computer scripts -->
    <script src="https://unpkg.com/three@0.158.0/build/three.min.js" defer crossorigin="anonymous"></script>
    <script src="ui-tilt.b51314b6.js" defer></script>
    <script src="ui-menu.81b02d2d.js" defer></script>
    <script src="navigation.86de970c.js" defer></script>
    <script src="three-hero.3cc2b982.js" defer></script>
    <script src="auto-cycle.4e9369db.js" defer></script>
    <script src="quantum.c1f0f509.js"></script>
    <script src="photon.97ae7c85.js"></script>
    <script src="memory.6733243c.js"></script>
    <script src="orchestrator.d7eef59f.js"></script>
    <script src="heliopass.3ddbc0d6.js"></script>
    <script src="thermal-model.38b09692.js"></script>
    <script src="main.8ebdafca.js"></script>
</body>
<script>
  // Register service worker for offline support even when landing directly on OS page
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js').catch(()=>{});
    });
  }
</script>
</html>
